---
phase: 01-css-token-engine
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pom.xml
  - src/main/java/com/dwc/laf/css/CssValue.java
  - src/main/java/com/dwc/laf/css/NamedCssColors.java
  - src/main/resources/com/dwc/laf/themes/default-light.css
  - src/test/java/com/dwc/laf/css/CssValueTest.java
  - src/test/java/com/dwc/laf/css/NamedCssColorsTest.java
autonomous: true

must_haves:
  truths:
    - "Project compiles with mvn compile and tests run with mvn test"
    - "CssValue sealed interface provides typed wrappers for all CSS value kinds"
    - "NamedCssColors resolves all 148 CSS named colors to java.awt.Color"
    - "A bundled default CSS file exists as a classpath resource"
  artifacts:
    - path: "pom.xml"
      provides: "Maven build with Java 21, JUnit 5, zero runtime deps"
      contains: "maven-compiler-plugin"
    - path: "src/main/java/com/dwc/laf/css/CssValue.java"
      provides: "Sealed interface type hierarchy for CSS values"
      contains: "sealed interface CssValue"
    - path: "src/main/java/com/dwc/laf/css/NamedCssColors.java"
      provides: "Static lookup of 148 CSS named colors"
      contains: "Map"
    - path: "src/main/resources/com/dwc/laf/themes/default-light.css"
      provides: "Bundled default theme CSS with DWC tokens"
      contains: "--dwc-"
  key_links:
    - from: "CssValue.java"
      to: "java.awt.Color"
      via: "ColorValue record wraps Color"
      pattern: "record ColorValue.*Color"
    - from: "NamedCssColors.java"
      to: "CssValue.java"
      via: "Returns Color objects used by ColorValue"
      pattern: "Color"
---

<objective>
Set up the Java project foundation: Maven build, type system, named colors lookup, and bundled default CSS theme.

Purpose: Every subsequent plan depends on the project compiling, the CssValue type hierarchy existing, and having a real CSS file to parse. This plan creates all foundational artifacts.
Output: Compilable Maven project with CssValue types, NamedCssColors, and a bundled DWC light theme CSS file.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-css-token-engine/01-CONTEXT.md
@.planning/phases/01-css-token-engine/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Maven project structure and POM</name>
  <files>
    pom.xml
  </files>
  <action>
Create the Maven POM file at project root with:
- groupId: com.dwc.laf
- artifactId: dwc-laf
- version: 0.1.0-SNAPSHOT
- packaging: jar
- Java 21 source/target via maven-compiler-plugin (use release flag, not source/target)
- JUnit 5 (junit-jupiter 5.10+) as TEST scope dependency -- this is the ONLY dependency
- maven-surefire-plugin configured for JUnit 5
- No other runtime dependencies (zero external runtime deps per user decision)
- UTF-8 encoding for source and reporting

Create the standard Maven directory structure:
- src/main/java/com/dwc/laf/css/ (empty, will be populated by tasks below)
- src/main/resources/com/dwc/laf/themes/ (for bundled CSS)
- src/test/java/com/dwc/laf/css/ (empty, will be populated by tasks below)
- src/test/resources/ (for test fixtures)

Verify the project compiles with `mvn compile` (nothing to compile yet but POM must be valid).
  </action>
  <verify>Run `mvn validate` -- must exit 0 with no errors. Run `ls -R src/` to confirm directory structure.</verify>
  <done>Maven POM is valid, all directories exist, `mvn validate` succeeds.</done>
</task>

<task type="auto">
  <name>Task 2: Create CssValue sealed interface type hierarchy and NamedCssColors</name>
  <files>
    src/main/java/com/dwc/laf/css/CssValue.java
    src/main/java/com/dwc/laf/css/NamedCssColors.java
    src/test/java/com/dwc/laf/css/CssValueTest.java
    src/test/java/com/dwc/laf/css/NamedCssColorsTest.java
  </files>
  <action>
**CssValue.java** -- Create a sealed interface with these record implementations:

```java
public sealed interface CssValue {
    record ColorValue(java.awt.Color color) implements CssValue {}
    record DimensionValue(float value, String unit) implements CssValue {
        public int intValue() { return Math.round(value); }
    }
    record IntegerValue(int value) implements CssValue {}
    record FloatValue(float value) implements CssValue {}
    record StringValue(String value) implements CssValue {}
    record RawValue(String raw) implements CssValue {}
}
```

- ColorValue wraps java.awt.Color (for all resolved color tokens)
- DimensionValue holds float + unit string (e.g., 0.875, "rem") with intValue() convenience converting rem to px at 14px base (per research discretion recommendation: rem -> px at 14px base)
- IntegerValue for pure integer values (font weights like 400, 700)
- FloatValue for unitless floats (line-height: 1.25)
- StringValue for string values (font-family stacks, border-style names)
- RawValue for anything that cannot be typed (calc() expressions, complex values) -- stored as raw string per discretion decision

**NamedCssColors.java** -- Create a final utility class with:
- A private static unmodifiable Map<String, Color> containing all 148 CSS named colors (aliceblue through yellowgreen)
- Key: lowercase color name, Value: java.awt.Color with correct RGB values
- Public static method: `Optional<Color> resolve(String name)` -- case-insensitive lookup
- Include transparent (rgba 0,0,0,0) as a special entry
- Reference: https://www.w3.org/TR/css-color-4/#named-colors for authoritative RGB values

**CssValueTest.java** -- Test:
- Each CssValue record creates correctly and holds expected values
- DimensionValue.intValue() rounds correctly (e.g., 0.875rem at 14px base = 12px if conversion is added, otherwise just test Math.round)
- Pattern matching with switch works on sealed interface

**NamedCssColorsTest.java** -- Test:
- resolve("red") returns Optional containing Color(255, 0, 0)
- resolve("RED") returns same (case-insensitive)
- resolve("aliceblue") returns correct Color(240, 248, 255)
- resolve("transparent") returns Color(0, 0, 0, 0)
- resolve("notacolor") returns Optional.empty()
- At least spot-check 5-6 colors across the spectrum
  </action>
  <verify>Run `mvn test` -- all tests pass. Run `mvn compile` -- no compilation errors.</verify>
  <done>CssValue sealed interface compiles and tests pass. NamedCssColors resolves named colors correctly with 148 entries. All tests green.</done>
</task>

<task type="auto">
  <name>Task 3: Create bundled default light theme CSS from compiled DWC source</name>
  <files>
    src/main/resources/com/dwc/laf/themes/default-light.css
    src/test/resources/test-tokens.css
  </files>
  <action>
**default-light.css** -- Create the bundled default theme CSS file. This needs to be compiled CSS (not SCSS) containing the DWC design tokens as CSS custom properties in a :root block.

Approach: The DWC source lives in the `dwc/` directory alongside this project. Check if a compiled CSS exists in `dwc/www/` or `dwc/dist/`. If not, generate a representative CSS file by manually expanding the SCSS mixin output from the DWC source files. The file must contain:

1. A `:root { }` block with all custom properties from these DWC SCSS mixins (read each mixin file and transcribe the custom properties):
   - props-fonts: font families, weights, sizes, line-heights (from `dwc/src/styles/mixins/props/_fonts.scss`)
   - props-sizes: component sizes (from `dwc/src/styles/mixins/props/_sizes.scss`)
   - props-spaces: spacing scale (from `dwc/src/styles/mixins/props/_spaces.scss`)
   - props-borders: border widths, radii (from `dwc/src/styles/mixins/props/_borders.scss`)
   - props-surfaces: surface colors (from `dwc/src/styles/mixins/props/_surfaces.scss`)
   - props-shadows: shadow definitions (from `dwc/src/styles/mixins/props/_shadows.scss`)
   - props-colors: base color HSL values (from `dwc/src/styles/mixins/props/_colors.scss`)
   - Color variations: generated light palette for primary, success, warning, danger, info, gray, default (from `dwc/src/styles/mixins/_colors-generator.scss` -- expand the @for loop for light mode: every 5th value from 5 to 95)
   - Focus ring properties (from `dwc/src/styles/mixins/props/states/_focus-ring.scss`)
   - Disabled state properties (from `dwc/src/styles/mixins/props/states/_disabled.scss`)

2. Representative component-level selectors with custom properties (from a few DWC component SCSS files, e.g., dwc-button host vars). Include at least `.dwc-button { }` and `.dwc-input { }` blocks to test component-level selector parsing.

The file should have 200-500+ custom properties to be realistic. Use actual DWC token names (--dwc-*). Include var() references between tokens (e.g., `--dwc-border-radius: var(--dwc-border-radius-s);`). Include HSL colors with var() references to hue/saturation variables (e.g., `--dwc-color-primary-50: hsl(var(--dwc-color-primary-h), var(--dwc-color-primary-s), 50%);`).

**test-tokens.css** -- Create a small focused test CSS file (~30-50 properties) for unit tests that covers all parsing edge cases:
- :root block with simple values: `--color-red: #ff0000;`
- var() references: `--theme-color: var(--color-red);`
- Nested var() fallbacks: `--fallback-test: var(--missing, var(--color-red, blue));`
- Circular reference (for testing detection): `--circular-a: var(--circular-b); --circular-b: var(--circular-a);`
- HSL colors: `--hsl-color: hsl(211, 100%, 50%);`
- HSLA colors: `--hsla-color: hsla(211, 100%, 50%, 0.5);`
- Modern space-separated: `--modern-hsl: hsl(211 100% 50%);`
- RGB/RGBA: `--rgb-color: rgb(255, 0, 0);`
- Hex formats: `--hex3: #f00; --hex6: #ff0000; --hex8: #ff000080;`
- Named color: `--named: red;`
- Dimensions: `--size-rem: 0.875rem; --size-px: 16px; --size-em: 1.5em;`
- Unitless numbers: `--weight: 400; --line-height: 1.25;`
- String values: `--font-family: -apple-system, BlinkMacSystemFont, sans-serif;`
- calc() expression: `--calc-val: calc(var(--size-m) / 2);`
- Component selector block: `.test-component { --comp-bg: var(--color-red); }`
- Property overriding: same property name in :root and component selector (component wins per user decision)
  </action>
  <verify>Verify files exist: `ls src/main/resources/com/dwc/laf/themes/default-light.css src/test/resources/test-tokens.css`. Count properties in default-light.css: should have 200+ lines containing `--dwc-`. Count properties in test-tokens.css: should cover all listed edge cases.</verify>
  <done>default-light.css contains 200+ DWC custom properties in :root with realistic var() references and HSL colors. test-tokens.css contains focused edge cases for all parsing scenarios. Both files are syntactically valid CSS.</done>
</task>

</tasks>

<verification>
- `mvn compile` succeeds with zero warnings
- `mvn test` succeeds with all tests passing
- CssValue sealed interface has 6 record types
- NamedCssColors has 148+ entries
- default-light.css has 200+ custom properties
- test-tokens.css covers all edge cases listed
</verification>

<success_criteria>
- Maven project builds and tests pass
- Type system ready for downstream parsers to produce CssValue instances
- Named colors lookup ready for color parser to use
- Bundled CSS and test CSS ready for parser plans to consume
</success_criteria>

<output>
After completion, create `.planning/phases/01-css-token-engine/01-01-SUMMARY.md`
</output>
