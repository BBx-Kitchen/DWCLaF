---
phase: 09-button-theme-variants-custom-css-themes
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - src/main/java/com/dwc/laf/DwcComponentGallery.java
autonomous: false

must_haves:
  truths:
    - "Gallery button section shows success, danger, warning, and info variant rows alongside existing default and primary rows"
    - "Each variant row displays Normal and Disabled buttons at minimum"
    - "Gallery header contains a theme switcher dropdown with Default, Theme 1, and Theme 2 options"
    - "Selecting a different theme visually changes all component colors in the gallery"
    - "Selecting 'Default' after switching restores the original bundled theme"
  artifacts:
    - path: "src/main/java/com/dwc/laf/DwcComponentGallery.java"
      provides: "Variant showcase rows and theme switcher UI"
      contains: "dwc.buttonType"
      min_lines: 400
  key_links:
    - from: "src/main/java/com/dwc/laf/DwcComponentGallery.java"
      to: "DwcLookAndFeel"
      via: "Theme switcher calls UIManager.setLookAndFeel(new DwcLookAndFeel()) and SwingUtilities.updateComponentTreeUI()"
      pattern: "setLookAndFeel"
    - from: "src/main/java/com/dwc/laf/DwcComponentGallery.java"
      to: "System.setProperty"
      via: "Theme switcher sets dwc.theme system property before L&F reinstall"
      pattern: "dwc\\.theme"
---

<objective>
Update DwcComponentGallery to showcase all button variants (success, danger, warning, info) and add a theme switcher dropdown that loads custom CSS files and re-applies the L&F.

Purpose: Demonstrate the button variant system and runtime theme switching capability to prove visual parity with DWC web components.

Output: Updated gallery with 6 button variant rows and working theme switcher.
</objective>

<execution_context>
@/Users/beff/.claude/get-shit-done/workflows/execute-plan.md
@/Users/beff/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-button-theme-variants-custom-css-themes/09-RESEARCH.md
@.planning/phases/09-button-theme-variants-custom-css-themes/09-01-SUMMARY.md
@src/main/java/com/dwc/laf/DwcComponentGallery.java
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add variant button rows and theme switcher to gallery</name>
  <files>
    src/main/java/com/dwc/laf/DwcComponentGallery.java
  </files>
  <action>
Modify DwcComponentGallery.java with two changes:

**1. Theme switcher in header area:**

After the subtitle label and before the first component section, add a theme switcher row:
- Create a JPanel with FlowLayout(LEFT, 8, 0) and LEFT_ALIGNMENT
- Add a JLabel "Theme:"
- Add a JComboBox&lt;String&gt; with items: "Default (bundled)", "Theme 1", "Theme 2"
- The combo's ActionListener should:
  - index 0: `System.clearProperty("dwc.theme")`
  - index 1: `System.setProperty("dwc.theme", "css/theme1.css")`
  - index 2: `System.setProperty("dwc.theme", "css/theme2.css")`
  - Then: `UIManager.setLookAndFeel(new DwcLookAndFeel())`
  - Then: `SwingUtilities.updateComponentTreeUI(SwingUtilities.getWindowAncestor(themeSelector))`
  - Wrap in try/catch(Exception) with e.printStackTrace()
  - After updateComponentTreeUI, call `themeSelector.setSelectedIndex(idx)` where `idx` is the selected index captured before the L&F change (because updateComponentTreeUI may reset the combo state). Store the selected index in a local variable before the L&F switch, and after updateComponentTreeUI, re-select it. Use `SwingUtilities.invokeLater(() -> themeSelector.setSelectedIndex(savedIdx))` to ensure it runs after the UI update.
- Add vertical strut (16) after the theme selector row and before component sections

**2. Variant button rows in createButtonSection():**

After the existing "Primary variant" row block, add 4 more variant row blocks following the exact same pattern. For each variant (success, danger, warning, info):
- Add a label panel with italic text: "{Variant} variant:" (e.g., "Success variant:")
- Add a 4px strut
- Add a GridLayout(1, 3, 8, 0) row with 3 columns:
  - Column 1: Normal button (text = variant name, e.g., "Success") with `putClientProperty("dwc.buttonType", variantName)`
  - Column 2: Empty JLabel as spacer
  - Column 3: Disabled button (text = "Disabled", same variant client property, setEnabled(false))
- Add an 8px strut between rows

To avoid code duplication, extract a helper method:
```java
private static void addVariantRow(JPanel section, String variant, String label) {
    JPanel labelPanel = new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));
    labelPanel.setAlignmentX(Component.LEFT_ALIGNMENT);
    JLabel lbl = new JLabel(label + " variant:");
    lbl.setFont(lbl.getFont().deriveFont(Font.ITALIC));
    labelPanel.add(lbl);
    section.add(labelPanel);
    section.add(Box.createVerticalStrut(4));

    JPanel row = new JPanel(new GridLayout(1, 3, 8, 0));
    row.setAlignmentX(Component.LEFT_ALIGNMENT);

    JButton normal = new JButton(label);
    normal.putClientProperty("dwc.buttonType", variant);
    JButton disabled = new JButton("Disabled");
    disabled.putClientProperty("dwc.buttonType", variant);
    disabled.setEnabled(false);

    row.add(normal);
    row.add(new JLabel(""));
    row.add(disabled);
    section.add(row);
    section.add(Box.createVerticalStrut(8));
}
```

Call this helper 4 times after the existing primary row block:
```java
addVariantRow(section, "success", "Success");
addVariantRow(section, "danger", "Danger");
addVariantRow(section, "warning", "Warning");
addVariantRow(section, "info", "Info");
```

No hardcoded colors in demo code -- the L&F handles all theming.
  </action>
  <verify>
`mvn compile exec:java -f /Users/beff/_lab/dwclaf/pom.xml` launches the gallery. Visually verify: (1) button section shows 6 variant rows (default, primary, success, danger, warning, info), (2) theme switcher dropdown appears near the top, (3) switching themes visually changes component colors.
  </verify>
  <done>
Gallery shows all 6 button variant rows with correct variant-specific colors. Theme switcher dropdown works: selecting Theme 1 or Theme 2 re-applies the L&F with the custom CSS and all components update visually. Selecting Default restores the bundled theme.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of button variants and theme switching</name>
  <files>src/main/java/com/dwc/laf/DwcComponentGallery.java</files>
  <action>
User visually verifies the DwcComponentGallery with button variant showcase and theme switching.

Run: `cd /Users/beff/_lab/dwclaf && mvn compile exec:java`

Verify:
1. Button section shows 6 variant rows (Default, Primary, Success, Danger, Warning, Info)
2. Each variant has distinct semantic colors (green for success, red for danger, amber for warning, teal/cyan for info)
3. Hover over variant buttons -- hover state uses the variant's lighter shade
4. Click and hold variant buttons -- pressed state uses the variant's darker shade
5. Tab to a variant button -- focus ring matches the variant's color (green ring for success, red for danger, etc.)
6. Theme switcher dropdown appears near the top of the gallery
7. Select "Theme 1" -- all component colors change according to theme1.css
8. Select "Theme 2" -- all component colors change again
9. Select "Default (bundled)" -- colors restore to original
  </action>
  <verify>User confirms all 6 button variants render with correct semantic colors, per-variant focus rings work, and theme switching updates all components</verify>
  <done>User types "approved" confirming visual correctness, or describes issues to fix</done>
</task>

</tasks>

<verification>
1. `mvn compile -f /Users/beff/_lab/dwclaf/pom.xml` -- clean compilation
2. Gallery displays 6 button variant rows (default, primary, success, danger, warning, info)
3. Each variant has visually distinct colors matching its semantic meaning
4. Theme switcher dropdown with 3 options appears in gallery header
5. Theme switching actually changes all component colors
6. No hardcoded colors in gallery code
</verification>

<success_criteria>
- Gallery button section contains all 6 variant rows with correct semantic colors
- Theme switcher dropdown loads custom CSS and re-applies L&F
- All components in the gallery respond to theme changes
- Human verification confirms visual correctness
</success_criteria>

<output>
After completion, create `.planning/phases/09-button-theme-variants-custom-css-themes/09-02-SUMMARY.md`
</output>
